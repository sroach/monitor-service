{"openapi":"3.0.1","info":{"title":"Monitor Service Persistence API","description":"API for monitoring service persistence operations","contact":{"name":"Steve Roach","email":"support@roach.gy"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"version":"1.0.0"},"servers":[{"url":"/monitor-persistence","description":"Current environment"}],"tags":[{"name":"Monitor Records","description":"API for managing monitor records"}],"paths":{"/api/records":{"get":{"tags":["Monitor Records"],"summary":"Get all monitor records","description":"Retrieves a list of all monitor records","operationId":"getAllRecords","responses":{"200":{"description":"Successfully retrieved list of records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitorRecord"}}}}}},"post":{"tags":["Monitor Records"],"summary":"Create a new monitor record","description":"Creates a new monitor record with the provided data","operationId":"createRecord","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordRequest"}}},"required":true},"responses":{"201":{"description":"Record created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitorRecord"}}}}}}},"/api/records/{id}":{"get":{"tags":["Monitor Records"],"summary":"Get a monitor record by ID","description":"Retrieves a monitor record by its ID","operationId":"getRecordById","parameters":[{"name":"id","in":"path","description":"ID of the record to retrieve","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Record not found"},"200":{"description":"Successfully retrieved the record","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitorRecord"}}}}}},"delete":{"tags":["Monitor Records"],"summary":"Delete a monitor record","description":"Deletes a monitor record by its ID","operationId":"deleteRecord","parameters":[{"name":"id","in":"path","description":"ID of the record to delete","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Record successfully deleted"}}}},"/api/records/name/{name}":{"get":{"tags":["Monitor Records"],"summary":"Get monitor records by name","description":"Retrieves all monitor records with the specified name","operationId":"getRecordsByName","parameters":[{"name":"name","in":"path","description":"Name of the records to retrieve","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully retrieved records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitorRecord"}}}}}}},"/api/records/last/{seconds}":{"get":{"tags":["Monitor Records"],"summary":"Get monitor records from the last n seconds","description":"Retrieves all monitor records from the last n seconds","operationId":"getRecordsFromLastSeconds","parameters":[{"name":"seconds","in":"path","description":"Number of seconds to look back","required":true,"schema":{"type":"integer","format":"int64"},"example":60}],"responses":{"200":{"description":"Successfully retrieved records","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitorRecord"}}}}}}}},"components":{"schemas":{"RecordRequest":{"required":["name","responseTimeMs","statusCode","url"],"type":"object","properties":{"name":{"type":"string","description":"Name of the monitor","example":"Google"},"url":{"type":"string","description":"URL being monitored","example":"https://www.google.com"},"statusCode":{"type":"integer","description":"HTTP status code of the response","format":"int32","example":200},"responseTimeMs":{"type":"integer","description":"Response time in milliseconds","format":"int64","example":150},"errorMessage":{"type":"string","description":"Error message if any","example":"Connection timeout"}},"description":"Request object for creating a monitor record"},"MonitorRecord":{"required":["name","responseTimeMs","statusCode","timestamp","url"],"type":"object","properties":{"id":{"type":"integer","description":"Unique identifier of the record","format":"int64","example":1},"name":{"type":"string","description":"Name of the monitor","example":"Google"},"url":{"type":"string","description":"URL being monitored","example":"https://www.google.com"},"statusCode":{"type":"integer","description":"HTTP status code of the response","format":"int32","example":200},"timestamp":{"type":"string","description":"Timestamp when the record was created","format":"date-time"},"responseTimeMs":{"type":"integer","description":"Response time in milliseconds","format":"int64","example":150},"errorMessage":{"type":"string","description":"Error message if any","nullable":true,"example":"Connection timeout"}},"description":"Entity representing a monitor record"}}}}